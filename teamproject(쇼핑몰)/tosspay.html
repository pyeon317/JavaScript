<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!-- 결제위젯 SDK 추가 -->
    <script src="https://js.tosspayments.com/v1/payment-widget"></script>

</head>
$ git clone https://github.com/tosspayments/payment-widget-sample # 샘플 프로젝트 클론
$ cd payment-widget-sample/vue

<body>




    <!-- 결제위젯, 이용약관 영역 -->
    <div id="payment-method"></div>
    <div id="agreement"></div>
    <!-- 결제하기 버튼 -->
    <button id="payment-button">결제하기</button>


    <script>
        // 문서 테스트 키
        // 토스페이먼츠 회원가입하기 전이라면 아래 키로 결제위젯을 연동하세요.
        // const clientKey = 'test_ck_D5GePWvyJnrK0W0k6q8gLzN97Eoq'
        const secretKey = 'test_sk_zXLkKEypNArWmo50nX3lmeaxYG5R';


        const clientKey = "test_ck_D5GePWvyJnrK0W0k6q8gLzN97Eoq"
        const customerKey = "SHAQ5YQCNm5EaqXNPskYq" // 내 상점에서 고객을 구분하기 위해 발급한 고객의 고유 ID
        const button = document.getElementById("payment-button")

        // ------  결제위젯 초기화 ------ 
        // 비회원 결제에는 customerKey 대신 ANONYMOUS를 사용하세요.
        const paymentWidget = PaymentWidget(clientKey, customerKey, {
            brandpay: {                              // 결제위젯에 브랜드페이 추가하기
                redirectUrl: 'http://my-store.com/brandpay/callback-auth' // Access Token 발급에 사용되는 리다이렉트 URL
            }
        }) // 회원 결제
        // const paymentWidget = PaymentWidget(clientKey, PaymentWidget.ANONYMOUS) // 비회원 결제


        // ------  결제위젯 렌더링 ------ 
        // 결제수단 UI를 렌더링할 위치를 지정합니다. `#payment-method`와 같은 CSS 선택자와 결제 금액 객체를 추가하세요.
        // DOM이 생성된 이후에 렌더링 메서드를 호출하세요.
        // https://docs.tosspayments.com/reference/widget-sdk#renderpaymentmethods선택자-결제-금액-옵션
        paymentWidget.renderPaymentMethods("#payment-method", { value: 15000 });

        const paymentMethodWidget = PaymentWidget.renderPaymentMethods();
        const selectedPaymentMethod = paymentMethodWidget.getSelectedPaymentMethod();
        // ------  이용약관 렌더링 ------
        // 이용약관 UI를 렌더링할 위치를 지정합니다. `#agreement`와 같은 CSS 선택자를 추가하세요.
        // https://docs.tosspayments.com/reference/widget-sdk#renderagreement선택자
        const paymentAgreement = paymentWidget.renderAgreement('#agreement')


        // ------ '결제하기' 버튼 누르면 결제창 띄우기 ------
        // 더 많은 결제 정보 파라미터는 결제위젯 SDK에서 확인하세요.
        // https://docs.tosspayments.com/reference/widget-sdk#requestpayment결제-정보
        button.addEventListener("click", function () {
            paymentWidget.requestPayment({
                orderId: "W9D4fprwezxp7mmBqJCmx",            // 주문 ID(직접 만들어주세요)
                orderName: "토스 티셔츠 외 2건",                 // 주문명
                successUrl: "http://127.0.0.1:5500//success?paymentKey={PAYMENT_KEY}&orderId={ORDER_ID}&amount={AMOUNT}&paymentType={PAYMENT_TYPE}",  // 결제에 성공하면 이동하는 페이지(직접 만들어주세요)
                failUrl: "http://127.0.0.1:5500//fail?code={ERROR_CODE}&message={ERROR_MESSAGE}&orderId={ORDER_ID}",        // 결제에 실패하면 이동하는 페이지(직접 만들어주세요)
                customerEmail: "customer123@gmail.com",
                customerName: "김토스"
            })

        })

        paymentMethods.updateAmount(50000)
    </script>

</body>

</html>